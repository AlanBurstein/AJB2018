CREATE TABLE [emdbuser].[LOANXDB_N_04]
(
[XrefId] [int] NOT NULL,
[_561] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____561__636E525E] DEFAULT ((0.0)),
[_562] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____562__64627697] DEFAULT ((0.0)),
[_569] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____569__65569AD0] DEFAULT ((0.0)),
[_L229] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___L229__664ABF09] DEFAULT ((0.0)),
[_571] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____571__673EE342] DEFAULT ((0.0)),
[_580] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____580__6833077B] DEFAULT ((0.0)),
[_578] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____578__69272BB4] DEFAULT ((0.0)),
[_740] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____740__6A1B4FED] DEFAULT ((0.0)),
[_39] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N_0___39__6B0F7426] DEFAULT ((0.0)),
[_672] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____672__6C03985F] DEFAULT ((0.0)),
[_969] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____969__6CF7BC98] DEFAULT ((0.0)),
[_103] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____103__6DEBE0D1] DEFAULT ((0.0)),
[_107] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____107__6EE0050A] DEFAULT ((0.0)),
[_910] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____910__6FD42943] DEFAULT ((0.0)),
[_FE0213] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___FE02__70C84D7C] DEFAULT ((0.0)),
[_FE0216] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___FE02__71BC71B5] DEFAULT ((0.0)),
[_332] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____332__72B095EE] DEFAULT ((0.0)),
[_71] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N_0___71__73A4BA27] DEFAULT ((0.0)),
[_143] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____143__7498DE60] DEFAULT ((0.0)),
[_112] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____112__758D0299] DEFAULT ((0.0)),
[_104] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____104__768126D2] DEFAULT ((0.0)),
[_647] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____647__77754B0B] DEFAULT ((0.0)),
[_911] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____911__78696F44] DEFAULT ((0.0)),
[_439] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____439__795D937D] DEFAULT ((0.0)),
[_908] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____908__7A51B7B6] DEFAULT ((0.0)),
[_1296] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___1296__7B45DBEF] DEFAULT ((0.0)),
[_138] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____138__7C3A0028] DEFAULT ((0.0)),
[_108] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____108__7D2E2461] DEFAULT ((0.0)),
[_113] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____113__7E22489A] DEFAULT ((0.0)),
[_114] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____114__7F166CD3] DEFAULT ((0.0)),
[_101] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____101__000A910C] DEFAULT ((0.0)),
[_105] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____105__00FEB545] DEFAULT ((0.0)),
[_183] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____183__01F2D97E] DEFAULT ((0.0)),
[_10] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N_0___10__02E6FDB7] DEFAULT ((0.0)),
[_110] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____110__03DB21F0] DEFAULT ((0.0)),
[_389] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____389__04CF4629] DEFAULT ((0.0)),
[_29] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N_0___29__05C36A62] DEFAULT ((0.0)),
[_102] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____102__06B78E9B] DEFAULT ((0.0)),
[_106] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____106__07ABB2D4] DEFAULT ((0.0)),
[_978] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____978__089FD70D] DEFAULT ((0.0)),
[_FE0116] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___FE01__0993FB46] DEFAULT ((0.0)),
[_26] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N_0___26__0A881F7F] DEFAULT ((0.0)),
[_FE0113] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___FE01__0B7C43B8] DEFAULT ((0.0)),
[_1716] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___1716__0C7067F1] DEFAULT ((0.0)),
[_L228] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___L228__0D648C2A] DEFAULT ((0.0)),
[_L267] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___L267__0E58B063] DEFAULT ((0.0)),
[_CX_ACTAPPRFEETRANS_16] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_A__0F4CD49C] DEFAULT ((0.0)),
[_CX_ACTAPPRFEELO_16] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_A__1040F8D5] DEFAULT ((0.0)),
[_304] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____304__11351D0E] DEFAULT ((0.0)),
[_CX_CLTVNEW_10] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_C__12294147] DEFAULT ((0.0)),
[_CX_YEARFLOOD_10] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_Y__131D6580] DEFAULT ((0.0)),
[_CX_YEARHAZARD_10] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_Y__141189B9] DEFAULT ((0.0)),
[_1826] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___1826__1505ADF2] DEFAULT ((0.0)),
[_CX_LTVNEW_10] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_L__15F9D22B] DEFAULT ((0.0)),
[_CX_YEARCOUNTY_10] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_Y__16EDF664] DEFAULT ((0.0)),
[_CX_YEARCITY_10] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_Y__17E21A9D] DEFAULT ((0.0)),
[_1766] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___1766__18D63ED6] DEFAULT ((0.0)),
[_CX_YEARMI_10] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_Y__19CA630F] DEFAULT ((0.0)),
[_NEWHUD_X643] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__1ABE8748] DEFAULT ((0.0)),
[_NEWHUD_X607] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__1BB2AB81] DEFAULT ((0.0)),
[_NEWHUD_X136] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__1CA6CFBA] DEFAULT ((0.0)),
[_NEWHUD_X23] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__1D9AF3F3] DEFAULT ((0.0)),
[_NEWHUD_X727] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__1E8F182C] DEFAULT ((0.0)),
[_NEWHUD_X312] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__1F833C65] DEFAULT ((0.0)),
[_NEWHUD_X406] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__2077609E] DEFAULT ((0.0)),
[_NEWHUD_X572] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__216B84D7] DEFAULT ((0.0)),
[_NEWHUD_X609] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__225FA910] DEFAULT ((0.0)),
[_NEWHUD_X313] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__2353CD49] DEFAULT ((0.0)),
[_NEWHUD_X333] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__2447F182] DEFAULT ((0.0)),
[_NEWHUD_X19] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___NEWH__253C15BB] DEFAULT ((0.0)),
[_CX_MAXPI] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_M__263039F4] DEFAULT ((0.0)),
[_CX_FALLOUT2] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_F__27245E2D] DEFAULT ((0.0)),
[_22] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N_0___22__28188266] DEFAULT ((0.0)),
[_CX_ACCTADJSPRPX] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_A__290CA69F] DEFAULT ((0.0)),
[_CX_FALLOUT1] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_F__2A00CAD8] DEFAULT ((0.0)),
[LOCKRATE_2100] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N__LOCKR__2AF4EF11] DEFAULT ((0.0)),
[LOCKRATE_2090] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N__LOCKR__2BE9134A] DEFAULT ((0.0)),
[_CX_FALLOUT5] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_F__2CDD3783] DEFAULT ((0.0)),
[_CX_FALLOUT3] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N___CX_F__2DD15BBC] DEFAULT ((0.0)),
[_21] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N_0___21__2EC57FF5] DEFAULT ((0.0)),
[_23] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N_0___23__2FB9A42E] DEFAULT ((0.0)),
[_1807] [decimal] (23, 10) NULL,
[_3313] [decimal] (23, 10) NULL,
[_CX_BEDROOMS_3] [decimal] (23, 10) NULL,
[_CX_BEDROOMS_2] [decimal] (23, 10) NULL,
[_1793] [decimal] (23, 10) NULL,
[_NEWHUD_X1286] [decimal] (23, 10) NULL,
[_691] [decimal] (23, 10) NULL CONSTRAINT [DF__LOANXDB_N____691__30ADC867] DEFAULT ((0.0)),
[_CX_BEDROOMS_4] [decimal] (23, 10) NULL,
[_1626] [decimal] (23, 10) NULL,
[_572] [decimal] (23, 10) NULL,
[_NEWHUD_X1270] [decimal] (23, 10) NULL,
[_NEWHUD_X1278] [decimal] (23, 10) NULL,
[_1840] [decimal] (23, 10) NULL,
[_1843] [decimal] (23, 10) NULL,
[_253] [decimal] (23, 10) NULL,
[_1788] [decimal] (23, 10) NULL,
[_254] [decimal] (23, 10) NULL,
[_3503] [decimal] (23, 10) NULL,
[_2179] [decimal] (23, 10) NULL
) ON [PRIMARY]
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO

CREATE TRIGGER [emdbuser].[ti_LOANXDB_N_04_Forklift_LoanSummary]
   ON  [emdbuser].[LOANXDB_N_04]
   AFTER INSERT
AS 
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;
	SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

	IF NOT EXISTS( SELECT 1 FROM emdbuser.LoanSummary ls JOIN inserted i ON i.XRefID = ls.XRefID)
	BEGIN

		INSERT INTO emdbuser.LoanSummary([Guid]
										,[LoanNumber]
										,[LoanFolder] 
										,[LoanName]
										,[Status]
										,[loanStatus]
										,[RateLockStatus]
										,[RateIsLocked]
										,[Investor]
										,[Broker]
										,XRefID
										,LastModified
										,DTITop)
		SELECT NEWID()
			  ,''
			  ,''
			  ,NEWID()
			  ,'A'
			  ,''
			  ,''
			  ,''
			  ,''
			  ,''
			  ,XRefID
			  ,GETDATE()
			  ,_740
		FROM inserted i

	END
	ELSE

		UPDATE ls
		SET  DTITop = i._740
			,LastModified = GETDATE()
		FROM emdbuser.LoanSummary ls
		JOIN inserted i ON i.XRefID = ls.XRefID

	



END
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO

CREATE TRIGGER [emdbuser].[tu_LOANXDB_N_04_Forklift_LoanSummary]
   ON  [emdbuser].[LOANXDB_N_04]
   AFTER UPDATE
AS 
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;
	SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

	IF (UPDATE(_740))

		UPDATE ls
		SET  DTITop = i._740
			,LastModified = GETDATE()
		FROM emdbuser.LoanSummary ls
		JOIN inserted i ON i.XRefID = ls.XRefID

	



END
GO
ALTER TABLE [emdbuser].[LOANXDB_N_04] ADD CONSTRAINT [PK_LOANXDB_N_04_XrefId] PRIMARY KEY CLUSTERED  ([XrefId]) WITH (FILLFACTOR=80) ON [PRIMARY]
GO
